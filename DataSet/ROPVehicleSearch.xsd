<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="ROPVehicleSearch" targetNamespace="http://tempuri.org/ROPVehicleSearch.xsd" xmlns:mstns="http://tempuri.org/ROPVehicleSearch.xsd" xmlns="http://tempuri.org/ROPVehicleSearch.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:msprop="urn:schemas-microsoft-com:xml-msprop" attributeFormDefault="qualified" elementFormDefault="qualified">
  <xs:annotation>
    <xs:appinfo source="urn:schemas-microsoft-com:xml-msdatasource">
      <DataSource DefaultConnectionIndex="1" FunctionsComponentName="QueriesTableAdapter" Modifier="AutoLayout, AnsiClass, Class, Public" SchemaSerializationMode="IncludeSchema" xmlns="urn:schemas-microsoft-com:xml-msdatasource">
        <Connections>
          <Connection AppSettingsObjectName="MySettings" AppSettingsPropertyName="MCAPTestConnectionString" IsAppSettingsProperty="true" Modifier="Assembly" Name="MCAPTestConnectionString (MySettings)" ParameterPrefix="@" PropertyReference="ApplicationSettings.MCAP.My.MySettings.GlobalReference.Default.MCAPTestConnectionString" Provider="System.Data.SqlClient" />
          <Connection AppSettingsObjectName="MySettings" AppSettingsPropertyName="MCAPConnectionString" ConnectionStringObject="" IsAppSettingsProperty="true" Modifier="Assembly" Name="MCAPConnectionString (MySettings)" ParameterPrefix="@" PropertyReference="ApplicationSettings.MCAP.My.MySettings.GlobalReference.Default.MCAPConnectionString" Provider="System.Data.SqlClient" />
        </Connections>
        <Tables>
          <TableAdapter BaseClass="System.ComponentModel.Component" DataAccessorModifier="AutoLayout, AnsiClass, Class, Public" DataAccessorName="DsROPTableAdapter" GeneratorDataComponentClassName="DsROPTableAdapter" Name="DsROP" UserDataComponentName="DsROPTableAdapter">
            <MainSource>
              <DbSource ConnectionRef="MCAPConnectionString (MySettings)" DbObjectType="Unknown" GenerateMethods="Get" GenerateShortCommands="false" GeneratorGetMethodName="GetDataROPRecord" GetMethodModifier="Public" GetMethodName="GetDataROPRecord" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="false" UserGetMethodName="GetDataROPRecord" UserSourceName="GetDataROPRecord">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT        V.VehicleId, '' AS Retid, '' AS Retailer, V.MktId, M.Descrip AS Market, V.PublicationId, P.Descrip AS Newspaper, V.MediaId, Med.Descrip AS Media, V.BreakDt, 
                         CASE WHEN V.FlashInd = 1 AND V.NationalInd = 1 THEN 'National' WHEN V.FlashInd = 1 THEN 'Flash' ELSE 'Regular' END AS FlashStatus, 
                         'Details...' AS Details
FROM            Vehicle AS V WITH (NoLock) INNER JOIN
                         Mkt AS M WITH (NoLock) ON V.MktId = M.MktId AND V.BreakDt BETWEEN @FromDate AND @ToDate AND (M.MktId = @MktId OR
                         @MktId= 0) INNER JOIN
                         Media AS Med WITH (NoLock) ON V.MediaId = Med.MediaID AND Med.Descrip = 'ROP' INNER JOIN
                         Publication AS P WITH (NoLock) ON V.PublicationId = P.PublicationId AND (@PublicationId = 0 OR
                         V.PublicationId = @PublicationId)
WHERE        (V.VehicleId IN
                             (SELECT        P.VehicleId
                               FROM            Page AS P WITH (NoLock) INNER JOIN
                                                         PageCrop AS PC WITH (NoLock) ON P.PageId = PC.PageID AND (PC.RetId = @RetId OR
                                                         @RetId = 0)))
ORDER BY V.VehicleId</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="true" AutogeneratedName="FromDate" ColumnName="BreakDt" DataSourceName="MCAP.dbo.Vehicle" DataTypeServer="datetime" DbType="DateTime" Direction="Input" ParameterName="@FromDate" Precision="0" ProviderType="DateTime" Scale="0" Size="8" SourceColumn="BreakDt" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="ToDate" ColumnName="BreakDt" DataSourceName="MCAP.dbo.Vehicle" DataTypeServer="datetime" DbType="DateTime" Direction="Input" ParameterName="@ToDate" Precision="0" ProviderType="DateTime" Scale="0" Size="8" SourceColumn="BreakDt" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="MktId" ColumnName="MktId" DataSourceName="MCAP.dbo.Mkt" DataTypeServer="int" DbType="Int32" Direction="Input" ParameterName="@MktId" Precision="0" ProviderType="Int" Scale="0" Size="4" SourceColumn="MktId" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="PublicationId" ColumnName="PublicationId" DataSourceName="MCAP.dbo.Vehicle" DataTypeServer="int" DbType="Int32" Direction="Input" ParameterName="@PublicationId" Precision="0" ProviderType="Int" Scale="0" Size="4" SourceColumn="PublicationId" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="RetId" ColumnName="" DataSourceName="" DataTypeServer="int" DbType="Int32" Direction="Input" ParameterName="@RetId" Precision="0" Scale="0" Size="4" SourceColumn="" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </MainSource>
            <Mappings>
              <Mapping SourceColumn="VehicleId" DataSetColumn="VehicleId" />
              <Mapping SourceColumn="Retid" DataSetColumn="Retid" />
              <Mapping SourceColumn="Retailer" DataSetColumn="Retailer" />
              <Mapping SourceColumn="MktId" DataSetColumn="MktId" />
              <Mapping SourceColumn="Market" DataSetColumn="Market" />
              <Mapping SourceColumn="MediaId" DataSetColumn="MediaId" />
              <Mapping SourceColumn="Media" DataSetColumn="Media" />
              <Mapping SourceColumn="BreakDt" DataSetColumn="BreakDt" />
              <Mapping SourceColumn="FlashStatus" DataSetColumn="FlashStatus" />
              <Mapping SourceColumn="Details" DataSetColumn="Details" />
              <Mapping SourceColumn="PublicationId" DataSetColumn="PublicationId" />
              <Mapping SourceColumn="Newspaper" DataSetColumn="Newspaper" />
            </Mappings>
            <Sources>
              <DbSource ConnectionRef="MCAPConnectionString (MySettings)" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="FillByROPVehicleSearch" GenerateMethods="Fill" GenerateShortCommands="true" GeneratorSourceName="FillByROPVehicleSearch" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="true" UserGetMethodName="GetDataBy" UserSourceName="FillByROPVehicleSearch">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT        V.VehicleId, '' AS Retid, '' AS Retailer, V.MktId, M.Descrip AS Market, V.PublicationId, P.Descrip AS Newspaper, V.MediaId, Med.Descrip AS Media, V.BreakDt, 
CASE WHEN V.FlashInd = 1 AND V.NationalInd = 1 THEN 'National' WHEN V.FlashInd = 1 THEN 'Flash' ELSE 'Regular' END AS FlashStatus, 'Details...' AS Details
FROM Vehicle AS V  with (NoLock) 
INNER JOIN Mkt AS M  with (NoLock) ON V.MktId = M.MktId AND V.BreakDt BETWEEN @FromDate AND @ToDate 
AND (M.MktId = @MktId OR @MktId =0) 
INNER JOIN Media AS Med  with (NoLock) ON V.MediaId = Med.MediaID AND Med.Descrip = 'ROP'
INNER JOIN Publication AS P with (NoLock) ON V.PublicationId = P.PublicationID AND (@PublicationId =0 OR V.PublicationId = @PublicationId) 
WHERE  (V.VehicleId IN  (SELECT P.VehicleId FROM Page AS P  with (NoLock) 
							INNER JOIN PageCrop AS PC  with (NoLock) ON P.PageId = PC.PageID 
							AND (PC.RetId = @RetId OR @RetId =0)))
--ORDER BY V.VehicleId
UNION
SELECT        V.VehicleId, '' AS Retid, '' AS Retailer, V.MktId, M.Descrip AS Market, V.PublicationId, P.Descrip AS Newspaper, V.MediaId, Med.Descrip AS Media, V.BreakDt, 
CASE WHEN V.FlashInd = 1 AND V.NationalInd = 1 THEN 'National' WHEN V.FlashInd = 1 THEN 'Flash' ELSE 'Regular' END AS FlashStatus, 'Details...' AS Details
FROM Vehicle AS V  with (NoLock) 
INNER JOIN Mkt AS M  with (NoLock) ON V.MktId = M.MktId AND V.BreakDt BETWEEN @FromDate AND @ToDate 
AND (M.MktId = @MktId OR @MktId =0) 
INNER JOIN Media AS Med  with (NoLock) ON V.MediaId = Med.MediaID AND Med.Descrip = 'ROP'
INNER JOIN Publication AS P with (NoLock) ON V.PublicationId = P.PublicationID AND (@PublicationId =0 OR V.PublicationId = @PublicationId) 
WHERE  ( V.RetId = @RetId OR @RetId =0) AND  (V.VehicleId NOT IN  (SELECT P.VehicleId FROM Page AS P  with (NoLock) 
							INNER JOIN PageCrop AS PC  with (NoLock) ON P.PageId = PC.PageID 
							AND (PC.RetId = @RetId OR @RetId =0)))
ORDER BY V.VehicleId</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="true" AutogeneratedName="FromDate" ColumnName="BreakDt" DataSourceName="MCAP.dbo.Vehicle" DataTypeServer="datetime" DbType="DateTime" Direction="Input" ParameterName="@FromDate" Precision="0" ProviderType="DateTime" Scale="0" Size="8" SourceColumn="BreakDt" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="ToDate" ColumnName="BreakDt" DataSourceName="MCAP.dbo.Vehicle" DataTypeServer="datetime" DbType="DateTime" Direction="Input" ParameterName="@ToDate" Precision="0" ProviderType="DateTime" Scale="0" Size="8" SourceColumn="BreakDt" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="false" AutogeneratedName="MktId" ColumnName="MktId" DataSourceName="MCAP.dbo.Vehicle" DataTypeServer="int" DbType="Int32" Direction="Input" ParameterName="@MktId" Precision="0" ProviderType="Int" Scale="0" Size="4" SourceColumn="MktId" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="PublicationId" ColumnName="PublicationId" DataSourceName="MCAP.dbo.Vehicle" DataTypeServer="int" DbType="Int32" Direction="Input" ParameterName="@PublicationId" Precision="0" ProviderType="Int" Scale="0" Size="4" SourceColumn="PublicationId" SourceColumnNullMapping="false" SourceVersion="Current" />
                      <Parameter AllowDbNull="true" AutogeneratedName="RetId" ColumnName="" DataSourceName="" DataTypeServer="int" DbType="Int32" Direction="Input" ParameterName="@RetId" Precision="0" Scale="0" Size="4" SourceColumn="" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </Sources>
          </TableAdapter>
        </Tables>
        <Sources />
      </DataSource>
    </xs:appinfo>
  </xs:annotation>
  <xs:element name="ROPVehicleSearch" msdata:IsDataSet="true" msdata:UseCurrentLocale="true" msprop:EnableTableAdapterManager="true" msprop:Generator_DataSetName="ROPVehicleSearch" msprop:Generator_UserDSName="ROPVehicleSearch">
    <xs:complexType>
      <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element name="DsROP" msprop:Generator_UserTableName="DsROP" msprop:Generator_RowEvArgName="DsROPRowChangeEvent" msprop:Generator_TableVarName="tableDsROP" msprop:Generator_TablePropName="DsROP" msprop:Generator_RowDeletingName="DsROPRowDeleting" msprop:Generator_RowChangingName="DsROPRowChanging" msprop:Generator_RowDeletedName="DsROPRowDeleted" msprop:Generator_RowEvHandlerName="DsROPRowChangeEventHandler" msprop:Generator_TableClassName="DsROPDataTable" msprop:Generator_RowChangedName="DsROPRowChanged" msprop:Generator_RowClassName="DsROPRow">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="VehicleId" msdata:ReadOnly="true" msdata:AutoIncrement="true" msdata:AutoIncrementSeed="-1" msdata:AutoIncrementStep="-1" msprop:Generator_ColumnVarNameInTable="columnVehicleId" msprop:Generator_ColumnPropNameInRow="VehicleId" msprop:Generator_ColumnPropNameInTable="VehicleIdColumn" msprop:Generator_UserColumnName="VehicleId" type="xs:int" />
              <xs:element name="Retid" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnRetid" msprop:Generator_ColumnPropNameInRow="Retid" msprop:Generator_ColumnPropNameInTable="RetidColumn" msprop:Generator_UserColumnName="Retid" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="1" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Retailer" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnRetailer" msprop:Generator_ColumnPropNameInRow="Retailer" msprop:Generator_ColumnPropNameInTable="RetailerColumn" msprop:Generator_UserColumnName="Retailer" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="1" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="MktId" msprop:Generator_ColumnVarNameInTable="columnMktId" msprop:Generator_ColumnPropNameInRow="MktId" msprop:Generator_ColumnPropNameInTable="MktIdColumn" msprop:Generator_UserColumnName="MktId" type="xs:int" minOccurs="0" />
              <xs:element name="Market" msprop:Generator_ColumnVarNameInTable="columnMarket" msprop:Generator_ColumnPropNameInRow="Market" msprop:Generator_ColumnPropNameInTable="MarketColumn" msprop:Generator_UserColumnName="Market" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="50" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="MediaId" msprop:Generator_ColumnVarNameInTable="columnMediaId" msprop:Generator_ColumnPropNameInRow="MediaId" msprop:Generator_ColumnPropNameInTable="MediaIdColumn" msprop:Generator_UserColumnName="MediaId" type="xs:int" minOccurs="0" />
              <xs:element name="Media" msprop:Generator_ColumnVarNameInTable="columnMedia" msprop:Generator_ColumnPropNameInRow="Media" msprop:Generator_ColumnPropNameInTable="MediaColumn" msprop:Generator_UserColumnName="Media" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="50" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="BreakDt" msprop:Generator_ColumnVarNameInTable="columnBreakDt" msprop:Generator_ColumnPropNameInRow="BreakDt" msprop:Generator_ColumnPropNameInTable="BreakDtColumn" msprop:Generator_UserColumnName="BreakDt" type="xs:dateTime" minOccurs="0" />
              <xs:element name="FlashStatus" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnFlashStatus" msprop:Generator_ColumnPropNameInRow="FlashStatus" msprop:Generator_ColumnPropNameInTable="FlashStatusColumn" msprop:Generator_UserColumnName="FlashStatus" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="8" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Details" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnDetails" msprop:Generator_ColumnPropNameInRow="Details" msprop:Generator_ColumnPropNameInTable="DetailsColumn" msprop:Generator_UserColumnName="Details" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="10" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="PublicationId" msprop:Generator_ColumnVarNameInTable="columnPublicationId" msprop:Generator_ColumnPropNameInRow="PublicationId" msprop:Generator_ColumnPropNameInTable="PublicationIdColumn" msprop:Generator_UserColumnName="PublicationId" type="xs:int" minOccurs="0" />
              <xs:element name="Newspaper" msprop:Generator_ColumnVarNameInTable="columnNewspaper" msprop:Generator_ColumnPropNameInRow="Newspaper" msprop:Generator_ColumnPropNameInTable="NewspaperColumn" msprop:Generator_UserColumnName="Newspaper" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="50" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:complexType>
    <xs:unique name="Constraint1" msdata:PrimaryKey="true">
      <xs:selector xpath=".//mstns:DsROP" />
      <xs:field xpath="mstns:VehicleId" />
    </xs:unique>
  </xs:element>
</xs:schema>